{% extends "base.htm" %}
{% block title %}Edit paste{% endblock %}

{% block content %}
<form method="post" action="{{repo.getLink('edit')}}">
 <div class="control-group well pastedata">
   <label for="description">Description</label>
   <input type="text" name="description" id="description" value="{{repo.getDescription}}"/>
 </div>

 {% for fileid, file in repo.getFiles %}
  {% include 'edit-file.htm' with {'file': file, 'fileid': fileid} %}
 {% endfor %}


 <div class="well" style="text-align: center; display:none" id="add-button">
    <a class="btn" href="#">
     <i class="icon-plus"></i>
     Add file
    </a>
 </div>

 {% include 'edit-file.htm' with {'file': '', 'fileid': 'new'} %}


 <div class="well">
  <div class="row-fluid">
   <div class="span6">
    <a class="btn" href="{{repo.getLink('display')}}">Cancel</a>
   </div>
   <div class="span6" style="text-align: right">
    <button class="btn btn-primary" type="submit">
     <i class="icon-check icon-white"></i>
     Save
    </button>
   </div>
  </div>
 </div>

</form>
<script type="application/javascript">
$(document).ready(function() {
    $('#add-button').show();
    $('#filegroupnew').hide();
    $('#add-button a').bind('click', function() {
        $('#add-button').before("{% filter escape('js') %}
            {% include 'edit-file.htm' with {'file': '', 'fileid': '###'} %}
            {% endfilter %}"
            .replace(/###/g, $('.filegroup').length)
        );
        return false;
    });
});
</script>
{% endblock %}
